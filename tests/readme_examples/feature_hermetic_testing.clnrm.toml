# README Example Test: Hermetic Container Testing
# Verifies: "True hermetic testing - each test runs in completely isolated containers"
# Location in README: Lines 386-389, 468-469

[test.metadata]
name = "verify_hermetic_testing"
description = "Verify hermetic isolation - each test in separate containers with no interference"
version = "1.0.0"

[service.test1]
plugin = "generic_container"
image = "alpine:latest"
working_dir = "/test1"

[service.test2]
plugin = "generic_container"
image = "alpine:latest"
working_dir = "/test2"

[[scenario]]
name = "test1_creates_file"
service = "test1"
run = """
echo 'test1 data' > /tmp/test1.txt && \
cat /tmp/test1.txt && \
test -f /tmp/test1.txt
"""

[[expect.output]]
pattern = "test1 data"
description = "Test1 should create its file"

[[expect.status]]
exit_code = 0

[[scenario]]
name = "test2_isolated_from_test1"
service = "test2"
run = """
# This should fail because we're in a different container
test ! -f /tmp/test1.txt && \
echo 'Confirmed: test1 file not visible in test2 container' || \
echo 'FAIL: Containers not isolated'
"""

[[expect.output]]
pattern = "Confirmed: test1 file not visible"
description = "Test2 should NOT see test1's file - proves isolation"

[[expect.status]]
exit_code = 0

[expect.hermeticity]
no_external_services = true
resource_isolation = true
container_isolation = true

[report]
comment = "Hermetic testing: Each test runs in completely isolated containers"
