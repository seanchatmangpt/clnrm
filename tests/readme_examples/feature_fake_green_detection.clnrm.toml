# README Example Test: Fake-Green Detection
# Verifies: "Fake-Green Detection - 7 independent detection layers"
# Location in README: Lines 296-344

[test.metadata]
name = "verify_fake_green_detection"
description = "Verify fake-green detection with 7 validation layers as documented"
version = "1.0.0"

[otel]
exporter = "otlp"
endpoint = "http://localhost:4318"
sample_ratio = 1.0

[service.test_runner]
plugin = "generic_container"
image = "rust:1.70"
working_dir = "/workspace"

[[scenario]]
name = "fake_green_detection_layers"
service = "test_runner"
run = "clnrm run /workspace/tests/fake_green/no_execution.clnrm.toml"
artifacts.collect = ["spans:default"]

# Layer 1: Lifecycle Events (line 319)
[[expect.span]]
name = "container.exec"
events.any = ["container.start", "container.exec", "container.stop"]

# Layer 2: Span Graph (line 320)
[expect.graph]
must_include = [["test.run", "container.exec"]]

# Layer 3: Span Counts (line 321)
[expect.counts]
spans_total.gte = 2

# Layer 4: Temporal Ordering (line 322)
[expect.temporal]
must_precede = [["container.start", "container.stop"]]

# Layer 5: Window Containment (line 323)
[expect.window]
parent_contains_children = true

# Layer 6: Status Validation (line 324)
[expect.status]
all = "OK"

# Layer 7: Hermeticity (line 325)
[expect.hermeticity]
no_external_services = true

[report]
json = "fake_green_detection_report.json"
comment = "All 7 detection layers must pass for real execution proof"
