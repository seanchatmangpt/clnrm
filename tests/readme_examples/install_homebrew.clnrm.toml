# README Example Test: Homebrew Installation
# Verifies: Homebrew installation instructions (lines 426-434)
# Location in README: Lines 426-434

[test.metadata]
name = "verify_homebrew_installation"
description = "Verify Homebrew installation instructions work as documented"
version = "1.0.0"

[service.homebrew_installer]
plugin = "generic_container"
image = "ubuntu:latest"
working_dir = "/workspace"

[[scenario]]
name = "homebrew_tap_and_install"
service = "homebrew_installer"
run = """
# Install Homebrew prerequisites
apt-get update && apt-get install -y curl git build-essential

# Install Homebrew (non-interactive)
NONINTERACTIVE=1 /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# Add Homebrew to PATH
eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"

# Add the tap and install (as documented in README lines 428-429)
brew tap seanchatmangpt/clnrm || echo "Tap already exists"
brew install clnrm || echo "Package install attempted"

# Verify installation (as documented in README line 432)
clnrm --version
"""

[[expect.output]]
pattern = "clnrm [0-9]+\\.[0-9]+\\.[0-9]+"
description = "Should show version (line 433: 'clnrm 1.0.0')"

[[expect.status]]
exit_code = 0

[report]
json = "homebrew_install_report.json"
comment = "Verifies Homebrew installation from README lines 426-434"
