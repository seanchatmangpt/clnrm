# README Example Test: Multi-Format Reporting
# Verifies: "Multi-Format Reporting - JSON reports, JUnit XML, SHA-256 digests"
# Location in README: Lines 60-65, 514

[test.metadata]
name = "verify_multi_format_reports"
description = "Verify multi-format reporting with JSON, JUnit XML, and SHA-256 digests"
version = "1.0.0"

[service.reporter]
plugin = "generic_container"
image = "rust:1.70"
working_dir = "/workspace"

[[scenario]]
name = "json_report_generation"
service = "reporter"
run = """
clnrm run /workspace/tests/basic.clnrm.toml --format json --output /tmp/report.json && \
test -f /tmp/report.json && \
cat /tmp/report.json && \
grep -q '"test_name"' /tmp/report.json
"""

[[expect.output]]
pattern = '"test_name"'
description = "JSON report should contain test_name field"

[[expect.status]]
exit_code = 0

[[scenario]]
name = "junit_xml_report_generation"
service = "reporter"
run = """
clnrm run /workspace/tests/basic.clnrm.toml --format junit --output /tmp/junit.xml && \
test -f /tmp/junit.xml && \
cat /tmp/junit.xml && \
grep -q '<testsuite' /tmp/junit.xml
"""

[[expect.output]]
pattern = '<testsuite'
description = "JUnit XML report should contain testsuite element"

[[scenario]]
name = "sha256_digest_generation"
service = "reporter"
run = """
clnrm run /workspace/tests/basic.clnrm.toml --digest /tmp/test.sha256 && \
test -f /tmp/test.sha256 && \
cat /tmp/test.sha256 && \
grep -E '^[a-f0-9]{64}$' /tmp/test.sha256
"""

[[expect.output]]
pattern = '[a-f0-9]{64}'
description = "SHA-256 digest should be 64 hex characters"

[report]
json = "multi_format_report.json"
digest = "multi_format.sha256"
comment = "Verifies JSON, JUnit XML, and SHA-256 digest generation"
