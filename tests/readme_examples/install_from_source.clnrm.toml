# README Example Test: Source Installation
# Verifies: Building from source instructions (lines 440-445)
# Location in README: Lines 440-445

[test.metadata]
name = "verify_source_installation"
description = "Verify building from source instructions work as documented"
version = "1.0.0"

[service.source_builder]
plugin = "generic_container"
image = "rust:1.70"
working_dir = "/workspace"

[[scenario]]
name = "build_from_source"
service = "source_builder"
run = """
# Clone repository (as documented in README line 441)
cd /tmp && \
git clone https://github.com/seanchatmangpt/clnrm && \
cd clnrm && \

# Build release binary (as documented in README line 443)
cargo build --release && \

# Verify binary exists
test -f target/release/clnrm && \

# Verify binary runs
./target/release/clnrm --version
"""

[[expect.output]]
pattern = "clnrm [0-9]+\\.[0-9]+\\.[0-9]+"
description = "Should show version from built binary"

[[expect.status]]
exit_code = 0

[report]
json = "source_build_report.json"
comment = "Verifies source build from README lines 440-445"
